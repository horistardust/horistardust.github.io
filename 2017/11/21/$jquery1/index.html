<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>jQuery源码学习笔记(1) - Hexo</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com"><span>Github</span></a></li><li><a href="https://www.v2ex.com/"><span>V2EX</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">jQuery源码学习笔记(1)</h1><ul class="meta"><li><i class="icon icon-author"></i>horistardust</li><li><i class="icon icon-clock"></i>3 Minutes</li><li><i class="icon icon-calendar"></i>November 21, 2017</li></ul></div></div><div class="article-content" style="max-width:800px"><p>学习参考：<a href="https://www.imooc.com/learn/172" target="_blank" rel="external">慕课网：jQuery源码解析-架构与依赖模块</a></p>
<h2 id="jQuery设计理念"><a href="#jQuery设计理念" class="headerlink" title="jQuery设计理念"></a>jQuery设计理念</h2><p>jQuery是继prototype之后又一个优秀的Javascript框架。它是轻量级的js库 ，它兼容CSS3，还兼容各种浏览器（IE 6.0+, FF 1.5+, Safari 2.0+, Opera 9.0+），jQuery2.0及后续版本将不再支持IE6/7/8浏览器。jQuery使用户能更方便地处理HTML（标准通用标记语言下的一个应用）、events、实现动画效果，并且方便地为网站提供AJAX交互。jQuery还有一个比较大的优势是，它的文档说明很全，而且各种应用也说得很详细，同时还有许多成熟的插件可供选择。jQuery能够使用户的html页面保持代码和html内容分离，也就是说，不用再在html里面插入一堆js来调用命令了，只需定义id即可。<br>The Write Less,Do More（写更少，做更多），无疑就是jQuery的核心理念，简洁的API、优雅的链式、强大的查询与便捷的操作。从而把jQuery打造成前端世界的一把利剑，所向披靡！</p>
<h3 id="1、最新jQuery2-1-1版本的结构："><a href="#1、最新jQuery2-1-1版本的结构：" class="headerlink" title="1、最新jQuery2.1.1版本的结构："></a>1、最新jQuery2.1.1版本的结构：</h3><pre><code>;(function(global, factory) {
    factory(global);
}(typeof window !== &quot;undefined&quot; ? window : this, function(window, noGlobal) {
    var jQuery = function( selector, context ) {
        return new jQuery.fn.init( selector, context );
    };
    jQuery.fn = jQuery.prototype = {};
    // 核心方法
    // 回调系统
    // 异步队列
    // 数据缓存
    // 队列操作
    // 选择器引
    // 属性操作
    // 节点遍历
    // 文档处理
    // 样式操作
    // 属性操作
    // 事件体系
    // AJAX交互
    // 动画引擎
    return jQuery;
}));
</code></pre><h3 id="2、jQuery的模块依赖网："><a href="#2、jQuery的模块依赖网：" class="headerlink" title="2、jQuery的模块依赖网："></a>2、jQuery的模块依赖网：</h3><img src="/2017/11/21/$jquery1/jquery.jpg">
<p>jQuery一共13个模块，从2.1版开始jQuery支持通过AMD模块划分，jQuery在最开始发布的1.0版本是很简单的，只有CSS选择符、事件处理和AJAX交互3大块。其发展过程中，有几次重要的变革：</p>
<blockquote>
<p>  ☑  1.2.3 版发布，引入数据缓存，解决循环引用与大数据保存的问题</p>
<p>   ☑  1.3 版发布，它使用了全新的选择符引擎Sizzle，在各个浏览器下全面超越其他同类型JavaScript框架的查询速度，程序库的性能也因此有了极大提升</p>
<p>  ☑  1.5 版发布，新增延缓对像(Deferred Objects)，并用deferred重写了Ajax模块</p>
<p>   ☑  1.7 版发布，抽象出回调对象，提供了强大的的方式来管理回调函数列表。</p>
</blockquote>
<p>每一次大的改进都引入了一些新的机制、新的特性，通过这些新的机制就造就了如今jQuery库，一共13个模块，模块不是单一的，比如jQuery动画，都会依赖异步队列、动画队列、回调队列与数据缓存模块等。</p>
<p>jQuery抽出了所有可复用的特性，分离出单一模块，通过组合的用法，不管在设计思路与实现手法上jQuery都是非常高明的。</p>
<p>Query按我的理解分为五大块，选择器、DOM操作、事件、AJAX与动画，实际的13个模块,是为了更贴近<a href="http://blog.csdn.net/u012102401/article/details/50312645" target="_blank" rel="external">S.O.L.I.D五大原则</a>的“单一职责SRP”，遵守单一职责的好处是可以让我们很容易地来维护这个对象。</p>
<p>我们来看看jQuery文档针对业务层的Ajax的处理提供了一系列的</p>
<p><strong>门面接口：</strong></p>
<pre><code>.ajaxComplete()
.ajaxError()
.ajaxSend()
.ajaxStart()
.ajaxStop()
.ajaxSuccess()
</code></pre><p><strong>底层接口：</strong>     </p>
<pre><code>jQuery.ajax()
jQuery.ajaxSetup()  
</code></pre><p><strong>快捷方法：</strong></p>
<pre><code>jQuery.get()
jQuery.getJSON()
jQuery.getScript()
jQuery.post()       
</code></pre><h3 id="jQuery接口的设计原理"><a href="#jQuery接口的设计原理" class="headerlink" title="jQuery接口的设计原理"></a>jQuery接口的设计原理</h3><p>业务逻辑是复杂多变的,因此jquery高层API数量非常多。我们在深入内部看看Ajax的高层方法其实都是统一调用了一个静态的jQuery.ajax方法</p>
<p><strong>get，post的封装：</strong></p>
<pre><code>jQuery.each( [ &quot;get&quot;, &quot;post&quot; ], function( i, method ) {
    jQuery[ method ] = function( url, data, callback, type ) {
        // Shift arguments if data argument was omitted
        if ( jQuery.isFunction( data ) ) {
            type     = type || callback;
            callback = data;
            data     = undefined;
        }
        return jQuery.ajax({
            url: url,
            type: method,
            dataType: type,
            data: data,
            success: callback
        });
    };
});
</code></pre><p>在jQuery.ajax的内部实现是非常复杂的，首先ajax要考虑异步的处理与回调的统一性，所以就引入了异步队列模块（Deferred）与回调模块（Callbacks）, 所以要把这些模块方法在ajax方法内部再次封装成、构建出一个新的jQXHR对象，针对参数的默认处理，数据传输的格式化等等。</p>
</div><div class="article-meta" style="max-width:800px"><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jquery</a><span class="category-list-count">4</span></li></ul></div></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="cjacie80p0000iwhqahpl66jt" data-title="jQuery源码学习笔记(1)" data-url="http://yoursite.com/2017/11/21/$jquery1/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2017/11/23/vuex/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2017/11/18/MobileWeb/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://gitee.com/horis" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="https://www.zhihu.com/people/wei-jun-ba-dao-82/activities" title="Zhihu" target="_blank"><i class="icon icon-zhihu"></i></a></li><li><a href="https://www.segmentfault.com/u/horistardust" title="SegmentFault" target="_blank"><i class="icon icon-segmentfault"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2017 Hexo<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>